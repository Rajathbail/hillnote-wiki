(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{2584:()=>{},4182:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ek});var a=r(5155),l=r(2115),s=r(63),n=r(4033),o=r(7937),c=r(5299),i=r(2821),d=r(5889);function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,d.QP)((0,i.$)(t))}var m=r(2912);function h(e){let{className:t,children:r,...l}=e;return(0,a.jsxs)(m.bL,{"data-slot":"scroll-area",className:u("relative",t),...l,children:[(0,a.jsx)(m.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),(0,a.jsx)(p,{}),(0,a.jsx)(m.OK,{})]})}function p(e){let{className:t,orientation:r="vertical",...l}=e;return(0,a.jsx)(m.VM,{"data-slot":"scroll-area-scrollbar",orientation:r,className:u("flex touch-none p-px transition-colors select-none","vertical"===r&&"h-full w-2.5 border-l border-l-transparent","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent",t),...l,children:(0,a.jsx)(m.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var f=r(2467),x=r(3101);let g=(0,x.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function b(e){let{className:t,variant:r,size:l,asChild:s=!1,...n}=e,o=s?f.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:u(g({variant:r,size:l,className:t})),...n})}var v=r(3011);let j=v.bL,w=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(v.q7,{ref:t,className:u("",r),...l})});w.displayName="AccordionItem";let N=l.forwardRef((e,t)=>{let{className:r,children:l,...s}=e;return(0,a.jsx)(v.Y9,{className:"flex",children:(0,a.jsxs)(v.l9,{ref:t,className:u("flex flex-1 items-center justify-between py-2 font-medium transition-all [&[data-state=open]>svg]:rotate-180",r),...s,children:[l,(0,a.jsx)(n.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});N.displayName=v.l9.displayName;let y=l.forwardRef((e,t)=>{let{className:r,children:l,...s}=e;return(0,a.jsx)(v.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:(0,a.jsx)("div",{className:u("pb-4 pt-0",r),children:l})})});y.displayName=v.UC.displayName;let k={siteName:"HillnoteWiki",workspace:{path:"/Welcome to Hillnote! /",enabled:!0,documentsFolder:"documents",registryFile:"documents-registry.json",initialFile:"documents/Start Here .md",customOrder:[]},ui:{navigationMode:"wiki",authorsNotes:{enabled:!0,title:"Author's Notes"},relatedDocuments:{enabled:!0,title:"Related Documents"}}};async function C(){if(!k.workspace.enabled)return null;try{let e="".concat(k.workspace.path).concat(k.workspace.registryFile),t=await fetch(e);if(!t.ok)return console.error("Failed to fetch workspace registry:",t.statusText),null;return await t.json()}catch(e){return console.error("Error loading workspace registry:",e),null}}async function E(){let e=await C();return e?function(e){var t,r,a,l;let s=[],n=new Map,o=new Map;null==(t=e.documents)||t.forEach((e,t)=>{o.set(e.path,t)}),null==(r=e.folders)||r.forEach((t,r)=>{var a;o.set(t.path,r+((null==(a=e.documents)?void 0:a.length)||0))}),null==(a=e.folders)||a.forEach(e=>{let t=e.path.split("/"),r=t[t.length-1],a={id:e.path,name:r,type:"directory",path:e.path,emoji:e.emoji||"\uD83D\uDCC1",children:[]};n.set(e.path,a)}),null==(l=e.documents)||l.forEach(e=>{let t=e.path.split("/"),r=t[t.length-1],a={id:e.path,name:r,type:"file",path:e.path,emoji:e.emoji||"\uD83C\uDF35"};n.set(e.path,a)}),n.forEach((e,t)=>{let r=t.split("/");if(2===r.length)s.push(e);else if(r.length>2){let t=r.slice(0,-1).join("/"),a=n.get(t);a&&a.children?a.children.push(e):s.push(e)}});let c=e=>{e.sort((e,t)=>{var r,a;if(k.workspace.customOrder&&k.workspace.customOrder.length>0){let r=k.workspace.customOrder.indexOf(e.path),a=k.workspace.customOrder.indexOf(t.path);if(-1!==r&&-1!==a)return r-a;if(-1!==r)return -1;if(-1!==a)return 1}return(null!=(r=o.get(e.path))?r:Number.MAX_SAFE_INTEGER)-(null!=(a=o.get(t.path))?a:Number.MAX_SAFE_INTEGER)}),e.forEach(e=>{e.children&&e.children.length>0&&c(e.children)})};return c(s),s}(e):[]}let A=(e,t)=>!!e.children&&!!t&&e.children.some(e=>e.id===t||!!e.children&&A(e,t)),S=e=>{var t;let{node:r,currentFile:l,onFileSelect:s,parentPath:n=""}=e,o=l===r.id,c=r.children&&r.children.length>0,i=n?"".concat(n,"-").concat(r.id):r.id,d=A(r,l);return"file"===r.type?(0,a.jsx)("button",{className:u("flex items-center gap-2 rounded-md px-3 py-1.5 text-sm transition-colors w-full text-left",o?"bg-accent font-semibold":"hover:bg-accent/50"),onClick:()=>s(r.id),children:(0,a.jsx)("span",{className:"break-words",children:r.name.endsWith(".md")?r.name.replace(/\.md$/,""):r.name})}):c?(0,a.jsx)(j,{type:"single",collapsible:!0,className:"w-full",defaultValue:d?i:void 0,children:(0,a.jsxs)(w,{value:i,className:"border-b-0",children:[(0,a.jsx)(N,{className:"px-3 py-2 text-sm hover:no-underline hover:bg-accent/50 rounded-md",children:r.name}),(0,a.jsx)(y,{className:"pl-3",children:(0,a.jsx)("div",{className:"flex flex-col space-y-1",children:null==(t=r.children)?void 0:t.map(e=>(0,a.jsx)(S,{node:e,currentFile:l,onFileSelect:s,parentPath:i},e.id))})})]})}):(0,a.jsx)("div",{className:"px-3 py-1.5 text-sm text-muted-foreground",children:r.name})},T=e=>{var t;let{node:r,level:s=0,currentFile:c,onFileSelect:i,mode:d="emoji"}=e,m=A(r,c),[h,p]=(0,l.useState)(m),f=c===r.id,x=r.children&&r.children.length>0;return(0,l.useEffect)(()=>{m&&p(!0)},[m,c]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"relative group",children:(0,a.jsxs)("button",{className:u("flex items-center gap-2 rounded-md px-2 py-1.5 text-xs font-medium transition-colors w-full text-left relative",f?"bg-accent font-bold opacity-100":"hover:bg-accent/50 opacity-80"),onClick:()=>{"file"===r.type?i(r.id):p(!h)},style:{paddingLeft:"".concat(8*s+8,"px")},children:["emoji"===d&&(0,a.jsxs)(a.Fragment,{children:["directory"===r.type&&(0,a.jsx)("span",{className:"transition-transform",children:h?(0,a.jsx)(n.A,{className:"h-3 w-3"}):(0,a.jsx)(o.A,{className:"h-3 w-3"})}),"directory"===r.type?h?(0,a.jsx)("span",{className:"text-md",children:"\uD83D\uDCC1"}):(0,a.jsx)("span",{className:"text-md",children:"\uD83D\uDCC2"}):(0,a.jsx)("span",{className:"text-xs ml-5 shrink-0",children:r.emoji||"\uD83C\uDF35"})]}),"wiki"===d&&"directory"===r.type&&(0,a.jsx)("span",{className:"transition-transform",children:h?(0,a.jsx)(n.A,{className:"h-3 w-3"}):(0,a.jsx)(o.A,{className:"h-3 w-3"})}),(0,a.jsx)("span",{className:"truncate",children:"file"===r.type&&r.name.endsWith(".md")?r.name.replace(/\.md$/,""):r.name})]})}),h&&x&&(0,a.jsx)("div",{className:"relative",children:null==(t=r.children)?void 0:t.map(e=>(0,a.jsx)(T,{node:e,level:s+1,currentFile:c,onFileSelect:i,mode:d},e.id))})]})};function _(){var e;let{showTitle:t=!0,title:r="All Pages",onFileSelect:s,selectedFile:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[o,i]=(0,l.useState)(n||null),[d,u]=(0,l.useState)([]),[m,p]=(0,l.useState)(!0),[f,x]=(0,l.useState)(null),[g,b]=(0,l.useState)((null==(e=k.ui)?void 0:e.navigationMode)||"emoji");return(0,l.useEffect)(()=>{i(n||null)},[n]),(0,l.useEffect)(()=>{(async()=>{try{if(p(!0),x(null),k.workspace.enabled){let e=await E();if(u(e),0===e.length)x("No documents found in workspace");else if(k.workspace.initialFile&&!o){let e=k.workspace.initialFile;i(e),s&&s(e)}}else u([{id:"1",name:"Getting Started",type:"directory",path:"documents/Getting Started",children:[{id:"1-1",name:"Introduction.md",type:"file",path:"documents/Getting Started/Introduction.md",emoji:"\uD83D\uDC4B"},{id:"1-2",name:"Installation.md",type:"file",path:"documents/Getting Started/Installation.md",emoji:"\uD83D\uDCBF"},{id:"1-3",name:"Quick Start.md",type:"file",path:"documents/Getting Started/Quick Start.md",emoji:"\uD83D\uDE80"}]},{id:"4",name:"README.md",type:"file",path:"documents/README.md",emoji:"\uD83D\uDCD6"}])}catch(e){console.error("Error loading workspace:",e),x("Failed to load workspace")}finally{p(!1)}})()},[]),(0,a.jsxs)("div",{className:"h-full flex flex-col p-3",children:[t&&(0,a.jsx)("div",{className:"px-3 pt-6 pb-4",children:(0,a.jsx)("h3",{className:"text-xs text-primary/40 font-semibold",children:r})}),(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(0,a.jsx)(h,{className:"h-full px-2 py-2",children:(0,a.jsx)("div",{className:"flex flex-col space-y-1",children:m?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(c.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):f?(0,a.jsx)("div",{className:"text-xs text-muted-foreground text-center py-4",children:f}):0===d.length?(0,a.jsx)("div",{className:"text-xs text-muted-foreground text-center py-4",children:"No documents found"}):"wiki"===g?d.map(e=>(0,a.jsx)(S,{node:e,currentFile:o,onFileSelect:e=>{i(e),s&&s(e)}},e.id)):d.map(e=>(0,a.jsx)(T,{node:e,level:0,currentFile:o,onFileSelect:e=>{i(e),s&&s(e)},mode:g},e.id))})})})]})}var F=r(4558),O=r(4206),R=r(2458),D=r(6645),I=r(5917);function L(e){let{className:t,...r}=e;return(0,a.jsx)(D.bL,{"data-slot":"checkbox",className:u("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(D.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(I.A,{className:"size-3.5"})})})}var M=r(7586);function z(e){let{comments:t}=e;if(!t||0===t.length)return(0,a.jsx)("div",{className:"text-sm text-muted-foreground text-center py-8",children:"No comments yet"});let r=t.filter(e=>!e.parentId),l=t.filter(e=>e.parentId),s=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(t=e.id,l.filter(e=>e.parentId===t)),c=e.author?e.author.charAt(0).toUpperCase():"A";return(0,a.jsxs)("div",{className:"".concat(r>0?"ml-12":""," group"),children:[(0,a.jsxs)("div",{className:"".concat(n?"pl-0":""),children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-500/10 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-emerald-500",children:c})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-foreground",children:e.author||"Anonymous"}),e.timestamp&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"•"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,a.jsx)("div",{className:"text-sm text-foreground leading-relaxed whitespace-pre-wrap",children:e.text}),o.length>0&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mb-3",children:[(0,a.jsx)(M.A,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[o.length," ",1===o.length?"reply":"replies"]})]})})]})]}),o.length>0&&(0,a.jsx)("div",{className:"mt-4 space-y-4",children:o.map(e=>s(e,r+1,!0))})]}),0===r&&!n&&(0,a.jsx)("div",{className:"border-b border-border/50 my-6 last:border-0"})]},e.id)};return(0,a.jsx)("div",{className:"space-y-2",children:r.map(e=>s(e))})}var P=r(8734),W=r(9397),q=r(5880);function U(e){let{documents:t,onDocumentClick:r}=e;return t&&0!==t.length?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:t.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>null==r?void 0:r(e.path),className:"flex items-center gap-3 p-4 rounded-lg bg-muted/30 hover:bg-muted/50 border border-border/50 hover:border-border transition-all text-left group",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.emoji?(0,a.jsx)("span",{className:"text-lg",children:e.emoji}):e.isFolder?(0,a.jsx)(P.A,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"}):(0,a.jsx)(W.A,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"text-sm font-medium group-hover:text-primary transition-colors truncate",children:e.title})}),(0,a.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0"})]},t))}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground text-center py-8",children:"No related documents found"})}function $(e){var t,r,s,n;let{comments:o,relatedDocuments:c,onDocumentClick:i}=e,[d,m]=(0,l.useState)("related"),h=(null==(t=k.ui.authorsNotes)?void 0:t.enabled)&&o.length>0,p=(null==(r=k.ui.relatedDocuments)?void 0:r.enabled)&&c.length>0;return h||p?h&&!p?(0,a.jsxs)("div",{className:"mt-12 pt-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-6",children:(null==(s=k.ui.authorsNotes)?void 0:s.title)||"Author's Notes"}),(0,a.jsx)(z,{comments:o})]}):p&&!h?(0,a.jsxs)("div",{className:"mt-12 pt-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-6",children:(null==(n=k.ui.relatedDocuments)?void 0:n.title)||"Related Documents"}),(0,a.jsx)(U,{documents:c,onDocumentClick:i})]}):(0,a.jsxs)("div",{className:"mt-12 pt-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-8 mb-8 border-b border-border",children:[(0,a.jsxs)("button",{onClick:()=>m("related"),className:u("pb-2 px-1 text-sm font-medium transition-all relative","related"===d?"text-foreground font-bold":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Related Documents"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground ml-1",children:["(",c.length,")"]})]}),"related"===d&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]}),(0,a.jsxs)("button",{onClick:()=>m("comments"),className:u("pb-2 px-1 text-sm font-medium transition-all relative","comments"===d?"text-foreground font-bold":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:"Notes"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground ml-1",children:["(",o.length,")"]})]}),"comments"===d&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]})]}),(0,a.jsxs)("div",{className:"mt-2",children:["related"===d&&(0,a.jsx)(U,{documents:c,onDocumentClick:i}),"comments"===d&&(0,a.jsx)(z,{comments:o})]})]}):null}var H=r(5740),B=r(2056),V=r(1169),Y=r(5426);function G(e){let{title:t,variant:r="default",content:s,collapsed:c=!0}=e,[i,d]=(0,l.useState)(c),m={"ai-response":{icon:(0,a.jsx)(H.A,{size:14,className:"sparkle-icon text-purple-500 dark:text-purple-400"}),borderClass:"border-purple-300 dark:border-purple-700",bgClass:"bg-purple-50/30 dark:bg-purple-900/10",shadowClass:"shadow-[0_0_15px_rgba(147,51,234,0.1)] dark:shadow-[0_0_15px_rgba(147,51,234,0.15)]",headerBgClass:"bg-gradient-to-r from-purple-50/80 to-purple-50/30 dark:from-purple-900/30 dark:to-purple-900/10 border-purple-200 dark:border-purple-800",textColorClass:"text-purple-600 dark:text-purple-400",iconColorClass:"text-purple-500 dark:text-purple-400",defaultTitle:"AI Response"},conflict:{icon:(0,a.jsx)(B.A,{size:14,className:"text-orange-500 dark:text-orange-400"}),borderClass:"border-orange-300 dark:border-orange-700",bgClass:"bg-orange-50/30 dark:bg-orange-900/10",shadowClass:"shadow-[0_0_15px_rgba(255,165,0,0.1)] dark:shadow-[0_0_15px_rgba(255,165,0,0.15)]",headerBgClass:"bg-orange-50/50 dark:bg-orange-900/20",textColorClass:"text-orange-600 dark:text-orange-400",iconColorClass:"text-orange-500 dark:text-orange-400",defaultTitle:"Merge Conflict"},"conflict-version":{icon:(0,a.jsx)(V.A,{size:14,className:"text-yellow-600 dark:text-yellow-400"}),borderClass:"border-yellow-300 dark:border-yellow-700",bgClass:"bg-yellow-50/30 dark:bg-yellow-900/10",shadowClass:"shadow-[0_0_10px_rgba(255,255,0,0.1)]",headerBgClass:"bg-yellow-50/50 dark:bg-yellow-900/20",textColorClass:"text-yellow-700 dark:text-yellow-400",iconColorClass:"text-yellow-600 dark:text-yellow-400",defaultTitle:"User Edit"},default:{icon:null,borderClass:"border-border",bgClass:"",shadowClass:"",headerBgClass:"bg-background hover:bg-muted/50",textColorClass:"",iconColorClass:"text-muted-foreground",defaultTitle:"Note"}},h=m[r]||m.default,p=t||h.defaultTitle;return(0,a.jsxs)("div",{className:u("scratch-space my-2 transition-all duration-75",!i&&"rounded-md border border-dashed",!i&&h.borderClass,!i&&h.bgClass,!i&&"ai-response"===r&&h.shadowClass,!i&&"conflict"===r&&h.shadowClass,!i&&"conflict-version"===r&&h.shadowClass),"data-expanded":!i,"data-variant":r,children:[(0,a.jsxs)("div",{className:u("flex items-center p-2 text-sm select-none",!i&&"bg-background hover:bg-muted/50 border-border rounded-md",!i&&"ai-response"===r&&h.headerBgClass,i&&"bg-background"),onClick:()=>d(!i),children:[(0,a.jsxs)("div",{className:"flex-1 flex items-center min-w-0",children:[(0,a.jsx)("span",{className:u("mr-2 cursor-pointer p-1 hover:bg-muted rounded-sm",i&&"text-muted-foreground","ai-response"===r&&h.iconColorClass),onClick:e=>{e.stopPropagation(),d(!i)},children:i?(0,a.jsx)(o.A,{size:16}):(0,a.jsx)(n.A,{size:16})}),"ai-response"===r||"conflict"===r||"conflict-version"===r?(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"flex items-center gap-1.5 cursor-pointer font-medium truncate",children:[h.icon,(0,a.jsx)("span",{className:u("truncate",i&&"text-muted-foreground",!i&&h.textColorClass),children:p})]})}):p&&(0,a.jsx)("span",{className:u("cursor-text truncate mr-2",i&&"text-muted-foreground"),children:p}),i&&(0,a.jsx)("div",{className:u("flex-1 h-[1px] bg-border/50 mx-2","ai-response"===r&&"bg-purple-200/50 dark:bg-purple-700/30")})]}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:(0,a.jsx)(b,{variant:"ghost",size:"sm",className:u("h-7 w-7 p-0",i&&"text-muted-foreground","ai-response"===r&&"text-purple-500 dark:text-purple-400"),onClick:e=>{e.stopPropagation();let t=document.createElement("div");t.innerHTML=s;let r=t.textContent||t.innerText||"";navigator.clipboard.writeText(r).then(()=>{console.log("Content copied to clipboard")}).catch(e=>{console.error("Failed to copy:",e)})},children:(0,a.jsx)(Y.A,{size:14})})})]}),(0,a.jsx)("div",{className:u("scratch-space-content transition-[max-height,opacity,transform] duration-200 ease-out overflow-hidden","ai-response"===r&&"bg-gradient-to-b from-purple-50/20 to-transparent dark:from-purple-900/10 dark:to-transparent","conflict"===r&&"bg-gradient-to-b from-orange-50/20 to-transparent dark:from-orange-900/10 dark:to-transparent","conflict-version"===r&&"bg-gradient-to-b from-yellow-50/20 to-transparent dark:from-yellow-900/10 dark:to-transparent"),style:{maxHeight:i?"0":"none",opacity:+!i,padding:i?"0":"1rem",transform:"translateY(".concat(i?"-10px":"0",")"),transitionProperty:"opacity, transform, padding",transitionDuration:"200ms",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)"},children:(0,a.jsx)("div",{className:u("prose dark:prose-invert","ai-response"===r&&"prose-purple dark:prose-purple"),children:(0,a.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:s}})})})]})}var X=r(9867),Z=r(9847),J=r(2001);function Q(e){let{src:t,title:r}=e,l=()=>{let e=t;t.startsWith("resources/")&&(e="".concat(k.workspace.path).concat(t)),window.open(e,"_blank","noopener,noreferrer")};return(0,a.jsx)("div",{className:"resource-pdf-container w-full my-3",children:(0,a.jsxs)("div",{className:"flex items-center p-3 bg-muted/30 border border-border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:l,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)("span",{className:"text-red-500 text-lg",children:"\uD83D\uDCCB"}),(0,a.jsx)("span",{className:"font-medium text-foreground text-sm",title:r,children:r})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"p-1.5 text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors",title:"Open in new tab","aria-label":"Open in new tab",children:(0,a.jsx)(q.A,{className:"w-4 h-4"})})})]})})}function K(e){let{src:t,title:r}=e,l=()=>{let e=t;t.startsWith("resources/")&&(e="".concat(k.workspace.path).concat(t)),window.open(e,"_blank","noopener,noreferrer")};return(0,a.jsx)("div",{className:"resource-html-container w-full my-3",children:(0,a.jsxs)("div",{className:"flex items-center p-3 bg-muted/30 border border-border rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",onClick:l,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)("span",{className:"text-blue-500 text-lg",children:"\uD83C\uDF10"}),(0,a.jsx)("span",{className:"font-medium text-foreground text-sm",title:r,children:r})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"p-1.5 text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors",title:"Open in new tab","aria-label":"Open in new tab",children:(0,a.jsx)(q.A,{className:"w-4 h-4"})})})]})})}function ee(e){let{videoId:t,title:r}=e;return(0,a.jsx)("div",{className:"resource-youtube-container w-full my-6",children:(0,a.jsx)("div",{className:"aspect-video w-full",children:(0,a.jsx)("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/".concat(t),title:r||"YouTube Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0,className:"w-full h-full rounded-lg"})})})}function et(e){var t,r;let{path:l,name:s,type:n}=e,o=s||(null==l?void 0:l.split("/").pop())||"Resource",c="folder"===n?"\uD83D\uDCC1":({pdf:"\uD83D\uDCD5",doc:"\uD83D\uDCC4",docx:"\uD83D\uDCC4",xls:"\uD83D\uDCCA",xlsx:"\uD83D\uDCCA",ppt:"\uD83D\uDCD1",pptx:"\uD83D\uDCD1",zip:"\uD83D\uDDDC️",rar:"\uD83D\uDDDC️","7z":"\uD83D\uDDDC️",tar:"\uD83D\uDDDC️",gz:"\uD83D\uDDDC️",txt:"\uD83D\uDCDD",md:"\uD83D\uDCDD",json:"\uD83D\uDCCB",xml:"\uD83D\uDCCB",csv:"\uD83D\uDCCA",js:"\uD83D\uDCDC",ts:"\uD83D\uDCDC",jsx:"\uD83D\uDCDC",tsx:"\uD83D\uDCDC",html:"\uD83C\uDF10",css:"\uD83C\uDFA8",py:"\uD83D\uDC0D",java:"☕",cpp:"⚙️",c:"⚙️",h:"⚙️",hpp:"⚙️",exe:"⚡",app:"⚡",dmg:"\uD83D\uDCBF",iso:"\uD83D\uDCBF",png:"\uD83D\uDDBC️",jpg:"\uD83D\uDDBC️",jpeg:"\uD83D\uDDBC️",gif:"\uD83D\uDDBC️",svg:"\uD83D\uDDBC️",mp4:"\uD83C\uDFA5",avi:"\uD83C\uDFA5",mov:"\uD83C\uDFA5",mp3:"\uD83C\uDFB5",wav:"\uD83C\uDFB5",ogg:"\uD83C\uDFB5"})[(null==(t=o)||null==(r=t.split(".").pop())?void 0:r.toLowerCase())||""]||"\uD83D\uDCCE",i=async()=>{let e=l;if(l.startsWith("resources/")&&(e="".concat(k.workspace.path).concat(l)),"folder"===n)alert("Folder path: ".concat(l,"\n\nNote: Folders cannot be opened directly in the browser. In the desktop app, this would open your file explorer."));else{var t;["pdf","txt","md","json","xml","html","css","js","ts","jsx","tsx","jpg","jpeg","png","gif","svg","mp4","mp3"].includes((null==(t=o.split(".").pop())?void 0:t.toLowerCase())||"")?window.open(e,"_blank","noopener,noreferrer"):d()}},d=async()=>{if("folder"===n)return void alert("Cannot download folders directly. Path: ".concat(l));let e=l;l.startsWith("resources/")&&(e="".concat(k.workspace.path).concat(l));try{let t=await fetch(e),r=await t.blob(),a=window.URL.createObjectURL(r),l=document.createElement("a");l.href=a,l.download=o,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(a)}catch(e){console.error("Error downloading file:",e),alert("Unable to download file: ".concat(o))}};return(0,a.jsx)("div",{className:"resource-file-container w-full my-3",children:(0,a.jsxs)("div",{className:"flex items-center p-3 bg-muted/30 border border-border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:i,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)("span",{className:"text-lg",children:c}),(0,a.jsx)("span",{className:"font-medium text-foreground text-sm",title:o,children:o})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:["file"===n&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),d()},className:"p-1.5 text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors",title:"Download file","aria-label":"Download file",children:(0,a.jsx)(X.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),"folder"===n?alert("Folder path: ".concat(l)):alert("File path: ".concat(l))},className:"p-1.5 text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors",title:"folder"===n?"Show folder info":"Show file info","aria-label":"folder"===n?"Show folder info":"Show file info",children:"folder"===n?(0,a.jsx)(Z.A,{className:"w-4 h-4"}):(0,a.jsx)(J.A,{className:"w-4 h-4"})})]})]})})}var er=r(2669);r(2584);let ea=new F.xI.Renderer;F.xI.use({extensions:[{name:"pdf",level:"inline",start:e=>e.indexOf("[pdf:"),tokenizer(e){let t=e.match(/^\[pdf:([^\]]+)\]\(([^)]+)\)/);if(t)return{type:"pdf",raw:t[0],title:t[1],href:t[2]}},renderer(e){let t=e.title||"PDF Document",r=e.href||"";return r?'<div class="resource-pdf-placeholder" data-type="resource-pdf" data-src="'.concat(r,'" data-title="').concat(t.replace(/"/g,"&quot;"),'"></div>'):""}},{name:"htmlEmbed",level:"inline",start:e=>e.indexOf("[html:"),tokenizer(e){let t=e.match(/^\[html:([^\]]+)\]\(([^)]+)\)/);if(t)return{type:"htmlEmbed",raw:t[0],title:t[1],href:t[2]}},renderer(e){let t=e.title||"HTML Document",r=e.href||"";return r?'<div class="resource-html-placeholder" data-type="resource-html" data-src="'.concat(r,'" data-title="').concat(t.replace(/"/g,"&quot;"),'"></div>'):""}},{name:"fileResource",level:"inline",start:e=>e.indexOf("[file:"),tokenizer(e){let t=e.match(/^\[file:([^\]]+)\]\(([^)]+)\)/);if(t)return{type:"fileResource",raw:t[0],name:t[1],path:t[2]}},renderer(e){let t=e.name||"File",r=e.path||"";return r?'<div class="resource-file-placeholder" data-type="resource-file" data-path="'.concat(r,'" data-name="').concat(t.replace(/"/g,"&quot;"),'" data-file-type="file"></div>'):""}},{name:"youtube",level:"inline",start:e=>e.indexOf("[youtube:"),tokenizer(e){let t=e.match(/^\[youtube:([^\]]+)\]\(([^)]+)\)/);if(t)return{type:"youtube",raw:t[0],title:t[1],videoId:t[2]}},renderer(e){let t=e.title||"YouTube Video",r=e.videoId||"";return r?'<div class="resource-youtube-placeholder" data-type="resource-youtube" data-video-id="'.concat(r,'" data-title="').concat(t.replace(/"/g,"&quot;"),'"></div>'):""}},{name:"folderResource",level:"inline",start:e=>e.indexOf("[folder:"),tokenizer(e){let t=e.match(/^\[folder:([^\]]+)\]\(([^)]+)\)/);if(t)return{type:"folderResource",raw:t[0],name:t[1],path:t[2]}},renderer(e){let t=e.name||"Folder",r=e.path||"";return r?'<div class="resource-file-placeholder" data-type="resource-file" data-path="'.concat(r,'" data-name="').concat(t.replace(/"/g,"&quot;"),'" data-file-type="folder"></div>'):""}}]}),ea.link=function(e){let{href:t,title:r,text:a}=e,l=a||"";return(l=(l=(l=(l=(l=l.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>")).replace(/__([^_]+)__/g,"<strong>$1</strong>")).replace(/\*([^*]+)\*/g,"<em>$1</em>")).replace(/_([^_]+)_/g,"<em>$1</em>")).replace(/`([^`]+)`/g,"<code>$1</code>"),t&&"string"==typeof t)?t.startsWith("#")||t.startsWith("doc:")?'<a href="'.concat(t,'"').concat(r?' title="'.concat(r,'"'):"",">").concat(l,"</a>"):'<a href="'.concat(t,'" target="_blank" rel="noopener noreferrer"').concat(r?' title="'.concat(r,'"'):"",">").concat(l,"</a>"):'<a href="">'.concat(l,"</a>")},F.xI.use({gfm:!0,breaks:!0,pedantic:!1,renderer:ea}),F.xI.use((0,O.iZ)({prefix:"heading-"}));let el=e=>{let t=document.createElement("div");t.innerHTML=e;let r=e=>{let t=!1;Array.from(e.children).filter(e=>"LI"===e.tagName).forEach(e=>{let a=e.querySelector('input[type="checkbox"]');if(a){t=!0;let r=a.checked||a.hasAttribute("checked"),l=e.cloneNode(!0),s=l.querySelector('input[type="checkbox"]');null==s||s.remove();let n=[];l.childNodes.forEach(e=>{var t;(e.nodeType!==Node.TEXT_NODE||(null==(t=e.textContent)?void 0:t.trim()))&&("P"===e.nodeName?e.childNodes.forEach(e=>{n.push(e.cloneNode(!0))}):n.push(e.cloneNode(!0)))}),e.setAttribute("data-type","taskItem"),e.setAttribute("data-checked",r?"true":"false"),e.innerHTML="";let o=document.createElement("div");o.className="checkbox-placeholder",o.setAttribute("data-checked",r?"true":"false"),e.appendChild(o);let c=document.createElement("div");c.className="task-content",n.forEach(e=>{c.appendChild(e)}),e.appendChild(c)}e.querySelectorAll("ul, ol").forEach(e=>{r(e)})}),t&&e.setAttribute("data-type","taskList")};return t.querySelectorAll("ul, ol").forEach(e=>{r(e)}),t.innerHTML};function es(e){let{checked:t,disabled:r=!0}=e;return(0,a.jsx)(L,{checked:t,disabled:r,className:"mt-0.5","aria-label":t?"Completed task":"Incomplete task"})}function en(e){let{filePath:t,onFileSelect:r,preloadedContent:s}=e,[n,o]=(0,l.useState)(""),[i,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(null),[h,p]=(0,l.useState)([]),[f,x]=(0,l.useState)([]),[g,b]=(0,l.useState)(""),v=(0,l.useRef)(null),j=(0,l.useRef)([]),w=(0,l.useRef)([]),N=(0,l.useRef)([]);return((0,l.useEffect)(()=>{(async()=>{if(!t){o(""),b("");return}try{var e,r,a,l,n,c,i,u;let h;d(!0),m(null),b((e=>{let t=e.replace(/^documents\//,"").replace(/\.md$/,""),r=t.split("/");return t=(t=r[r.length-1]).replace(/[-_]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")})(t));let f=t;try{let e="".concat(k.workspace.path,"documents-registry.json"),r=await fetch(e);if(r.ok){let e=await r.json(),s=null==(a=e.documents)?void 0:a.find(e=>e.path===t);if(!s&&t.includes("/")){let r=t.split("/").pop(),a=(null==(l=e.documents)?void 0:l.filter(e=>e.path.split("/").pop()===r))||[];if(a.length>0)for(let e of a){let r=t.split("/"),a=e.path.split("/"),l=!0;for(let e=0;e<r.length;e++){let t=r[e].toLowerCase();if(e<r.length-1){let r=null==(n=a[e])?void 0:n.toLowerCase();if(r&&!r.startsWith(t)){l=!1;break}}else if(r[e]!==a[a.length-1]){l=!1;break}}if(l){s=e;break}}}s&&(f=s.path)}}catch(e){console.warn("Could not load documents registry:",e)}if(s)h=s;else{let e=sessionStorage.getItem("doc-content-".concat(t));if(e)h=e;else{let e=f.startsWith("/")?f.slice(1):f,t="".concat(k.workspace.path).concat(e),r=await fetch(t);if(!r.ok)throw Error("Failed to load file: ".concat(r.statusText));h=await r.text()}}let g=[];if(null==(e=k.ui.authorsNotes)?void 0:e.enabled){let e=/<!-- COMMENTS_SECTION_START -->([\s\S]*?)<!-- COMMENTS_SECTION_END -->/,t=h.match(e);if(t){for(let e of t[1].split("\x3c!-- COMMENT").filter(e=>e.trim()).map(e=>"\x3c!-- COMMENT"+e))try{let t=e.match(/<!-- COMMENT\n([\s\S]+?)\n-->/);if(!t)continue;let r=JSON.parse(t[1]),a=e.indexOf("--\x3e")+3,l=e.substring(a).trim();g.push({id:r.id,text:l,author:r.name||r.author,timestamp:r.timestamp,parentId:r.parentId||null})}catch(e){console.error("Error parsing comment:",e)}h=h.replace(e,"")}p(g)}let{processedMarkdown:v,scratchspaces:j}=(e=>{let t,r=e,a=[],l=/:::scratchspace "(.+?)"\n> \*\*Note for AI:\*\* (.+?)\n\n([\s\S]*?)\n\n:::/g,s=/::scratch-space(?:-([^:]+))?::([^]+?)::scratch-space-end::/g,n=0;for(;null!==(t=l.exec(e));){let[e,l,s,o]=t,c="default";s.includes("AI-generated response")?c="ai-response":s.includes("merge conflict")?c="conflict":s.includes("user edit from conflict resolution")&&(c="conflict-version");let i="__SCRATCHSPACE_".concat(n++,"__");r=r.replace(e,i),a.push({title:l,variant:c,content:o.trim(),placeholder:i})}for(;null!==(t=s.exec(r));){let[e,l="default",s]=t,o=l,c="Note";"ai-response"===l||"AI Response"===l?(o="ai-response",c="AI Response"):"conflict"===l?(o="conflict",c="Merge Conflict"):"conflict-version"===l?(o="conflict-version",c="User Edit"):(c="default"===l?"Note":l,o="default");let i="__SCRATCHSPACE_".concat(n++,"__");r=r.replace(e,i),a.push({title:c,variant:o,content:s.trim(),placeholder:i})}return{processedMarkdown:r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=r.replace(/\[pdf:([^\]]+)\]\(([^)]+)\)/g,e=>e)).replace(/\[html:([^\]]+)\]\(([^)]+)\)/g,e=>e)).replace(/\[file:([^\]]+)\]\(([^)]+)\)/g,e=>e)).replace(/\[folder:([^\]]+)\]\(([^)]+)\)/g,e=>e)).replace(/\[youtube:([^\]]+)\]\(([^)]+)\)/g,e=>e)).replace(/\[\[([^\|]+)\|doc:([^\]]+)\]\]/g,(e,t,r)=>{let a=r;return a.endsWith(".md")||(a="".concat(a,".md")),a.startsWith("documents/")||(a="documents/".concat(a)),'<a href="#" class="document-link" data-document="'.concat(a,'">').concat(t,"</a>")})).replace(/\[\[([^\]]+)\]\]/g,(e,t)=>{if(!e.includes("|doc:")){let e=t;return e.endsWith(".md")||(e="".concat(e,".md")),e.startsWith("documents/")||(e="documents/".concat(e)),'<a href="#" class="document-link" data-document="'.concat(e,'">').concat(t,"</a>")}return e})).replace(/==([^=]+)==/g,"<mark>$1</mark>")).replace(/<color:(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3}|[a-zA-Z]+)>([^<]+)<\/color>/g,'<span style="color:$1">$2</span>')).replace(/\[\^([^\]]+)\]/g,"<sup>$1</sup>")).replace(/\[object Object\]/g,"")).replace(/\\- \\\[ \\\]/g,"- [ ]")).replace(/\\- \\\[x\\\]/g,"- [x]")).replace(/^(\s+)(- \[[x ]\])/gm,(e,t,r)=>{let a=t.length,l=t;if(a>=4){let e=Math.floor(a/4);l="  ".repeat(e)}else a>=2&&(l="  ");return l+r}),scratchspaces:a}})(h);if(null==(r=k.ui.relatedDocuments)?void 0:r.enabled){let e,t=[],r=/\[\[([^\|\]]+)(?:\|doc:([^\]]+))?\]\]/g,a=null;try{let e="".concat(k.workspace.path,"documents-registry.json"),t=await fetch(e);t.ok&&(a=await t.json())}catch(e){console.warn("Could not load documents registry:",e)}let l=new Map;if(a){null==(c=a.documents)||c.forEach(e=>{l.set(e.path,{emoji:e.emoji,name:e.name});let t=e.path.replace(/^documents\//,"");l.set(t,{emoji:e.emoji,name:e.name});let r=e.path.split("/").pop();r&&!l.has(r)&&l.set(r,{emoji:e.emoji,name:e.name})});let e=null==(i=a.documents)?void 0:i.find(e=>e.path===f);e&&e.referencedIn&&e.referencedIn.forEach(e=>{var r;let l=null==(r=a.documents)?void 0:r.find(t=>t.path===e);l&&!t.some(e=>e.path===l.path)&&t.push({title:l.name,path:l.path,emoji:l.emoji})}),e&&e.containsReferencesTo&&e.containsReferencesTo.forEach(e=>{var r;let l=null==(r=a.documents)?void 0:r.find(t=>t.path===e);l&&!t.some(e=>e.path===l.path)&&t.push({title:l.name,path:l.path,emoji:l.emoji})})}for(;null!==(e=r.exec(h));){let r=e[1],s=e[2]||e[1];if(s.endsWith(".md")||(s="".concat(s,".md")),s.startsWith("documents/")||(s="documents/".concat(s)),!t.some(e=>e.path===s)){let e=l.get(s);if(e||(e=l.get(s.replace(/^documents\//,""))),!e){let t=s.split("/").pop();t&&(e=l.get(t))}if(!e&&a){let t=null==(u=a.documents)?void 0:u.find(e=>e.path===s||e.path.endsWith(s.replace(/^documents\//,""))||e.name===r);t&&(e={emoji:t.emoji,name:t.name})}t.push({title:(null==e?void 0:e.name)||r,path:s,emoji:null==e?void 0:e.emoji})}}x(t)}let w=v.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,(e,t,r)=>{if(r.startsWith("resources/")){let e="".concat(k.workspace.path).concat(r);return'<img src="'.concat(e,'" alt="').concat(t||"",'" data-resource-path="').concat(r,'" loading="lazy" class="markdown-image" />')}return'<img src="'.concat(r,'" alt="').concat(t||"",'" loading="lazy" class="markdown-image" />')}),N={};j.forEach((e,t)=>{let{title:r,variant:a,content:l,placeholder:s}=e,n="\x3c!--SCRATCHSPACE_MARKER_".concat(t,"--\x3e");N[n]={title:r,variant:a,content:l,index:t},w=w.replace(s,n)});let y=F.xI.parse(w);y=el(y),Object.entries(N).forEach(e=>{let[t,{title:r,variant:a,content:l,index:s}]=e,n=l.replace(/==([^=]+)==/g,"<mark>$1</mark>");n=n.replace(/<color:(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3}|[a-zA-Z]+)>([^<]+)<\/color>/g,'<span style="color:$1">$2</span>');let o=F.xI.parse(n);o=el(o);let c='<div class="scratchspace-placeholder" data-id="'.concat("scratchspace-".concat(s),'" data-title="').concat(r.replace(/"/g,"&quot;"),'" data-variant="').concat(a,'" data-content="').concat(encodeURIComponent(o),'"></div>');y=y.replace(t,c)}),o(y),setTimeout(()=>{window.dispatchEvent(new CustomEvent("markdown-content-loaded"))},100)}catch(e){console.error("Error loading markdown:",e),m("Failed to load document")}finally{d(!1)}})()},[t]),(0,l.useEffect)(()=>{if(!v.current)return;let e=setTimeout(()=>{j.current.forEach(e=>{try{e.unmount()}catch(e){}}),j.current=[],w.current.forEach(e=>{try{e.unmount()}catch(e){}}),w.current=[],N.current.forEach(e=>{try{e.unmount()}catch(e){}}),N.current=[],v.current&&(v.current.querySelectorAll(".checkbox-placeholder").forEach(e=>{let t="true"===e.getAttribute("data-checked"),r=document.createElement("div");r.className="checkbox-container",e.replaceWith(r);let l=(0,er.createRoot)(r);l.render((0,a.jsx)(es,{checked:t})),j.current.push(l)}),v.current.querySelectorAll(".scratchspace-placeholder").forEach(e=>{let t=e.getAttribute("data-title")||"Note",r=e.getAttribute("data-variant")||"default",l=decodeURIComponent(e.getAttribute("data-content")||"");if(l){let s=document.createElement("div");e.replaceWith(s);let n=(0,er.createRoot)(s);n.render((0,a.jsx)(G,{title:t,variant:r,content:l,collapsed:!0})),w.current.push(n)}}),v.current.querySelectorAll(".resource-pdf-placeholder").forEach(e=>{let t=e.getAttribute("data-src")||"",r=e.getAttribute("data-title")||"PDF Document",l=document.createElement("div");e.replaceWith(l);let s=(0,er.createRoot)(l);s.render((0,a.jsx)(Q,{src:t,title:r})),N.current.push(s)}),v.current.querySelectorAll(".resource-html-placeholder").forEach(e=>{let t=e.getAttribute("data-src")||"",r=e.getAttribute("data-title")||"HTML Document",l=document.createElement("div");e.replaceWith(l);let s=(0,er.createRoot)(l);s.render((0,a.jsx)(K,{src:t,title:r})),N.current.push(s)}),v.current.querySelectorAll(".resource-file-placeholder").forEach(e=>{let t=e.getAttribute("data-path")||"",r=e.getAttribute("data-name")||"Resource",l=e.getAttribute("data-file-type")||"file",s=document.createElement("div");e.replaceWith(s);let n=(0,er.createRoot)(s);n.render((0,a.jsx)(et,{path:t,name:r,type:l})),N.current.push(n)}),v.current.querySelectorAll(".resource-youtube-placeholder").forEach(e=>{let t=e.getAttribute("data-video-id")||"",r=e.getAttribute("data-title")||"YouTube Video",l=document.createElement("div");e.replaceWith(l);let s=(0,er.createRoot)(l);s.render((0,a.jsx)(ee,{videoId:t,title:r})),N.current.push(s)}))},0),t=e=>{let t=e.target;if(t.classList.contains("document-link")){e.preventDefault();let a=t.getAttribute("data-document");a&&r&&r(a)}};return v.current.addEventListener("click",t),()=>{var r;clearTimeout(e),null==(r=v.current)||r.removeEventListener("click",t),setTimeout(()=>{j.current.forEach(e=>{try{e.unmount()}catch(e){}}),j.current=[],w.current.forEach(e=>{try{e.unmount()}catch(e){}}),w.current=[],N.current.forEach(e=>{try{e.unmount()}catch(e){}}),N.current=[]},0)}},[n,r]),i)?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):u?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:u})}):t?(0,a.jsx)("div",{className:"h-full overflow-auto",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-8 pt-4 pb-12",children:[(0,a.jsxs)("div",{className:"mb-8 px-8 py-8 bg-muted rounded-lg",children:[(0,a.jsx)(R.A,{className:"w-5 h-5 text-primary opacity-20 transition-opacity duration-200"}),(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-light mt-2",children:g}),(0,a.jsx)("div",{className:"document-title-divider"})]}),(0,a.jsx)("div",{ref:v,className:"markdown-content px-12",dangerouslySetInnerHTML:{__html:n}}),(0,a.jsx)($,{comments:h,relatedDocuments:f,onDocumentClick:e=>{r&&r(e)}})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Select a document to view"})})}function eo(e){let{selectedFile:t,onFileSelect:r,serverDocument:l}=e;return(0,a.jsx)(h,{className:"h-full",children:(0,a.jsx)(en,{filePath:t,onFileSelect:r,preloadedContent:null==l?void 0:l.content})})}function ec(){let{showTitle:e=!0,title:t="On This Page",contentSelector:r=".markdown-content"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[s,c]=(0,l.useState)(""),[i,d]=(0,l.useState)([]),[m,h]=(0,l.useState)(new Set);(0,l.useEffect)(()=>{let e=()=>{let e=document.querySelector(r);if(!e)return void console.log("TableOfContents: No content element found for selector:",r);let t=e.querySelectorAll("h1, h2, h3, h4, h5, h6");console.log("TableOfContents: Found headings:",t.length);let a=[],l=[];t.forEach((e,t)=>{let r=parseInt(e.tagName.charAt(1)),s=e.innerText||e.textContent||"";if(!s.trim())return;e.id||(e.id="heading-".concat(t,"-").concat(s.toLowerCase().replace(/[^\w]+/g,"-")));let n={id:e.id,title:s,level:r,children:[]};for(;l.length>0&&l[l.length-1].level>=r;)l.pop();if(0===l.length)a.push(n);else{let e=l[l.length-1].item;e.children||(e.children=[]),e.children.push(n)}l.push({item:n,level:r})}),console.log("TableOfContents: Extracted items:",a),d(a),a.length>0&&!s&&c(a[0].id)},t=()=>{console.log("TableOfContents: Content loaded event received"),setTimeout(e,100)};window.addEventListener("markdown-content-loaded",t);let a=setTimeout(()=>{e()},1e3),l=new MutationObserver(()=>{e()}),n=setTimeout(()=>{let e=document.querySelector(r);e&&l.observe(e,{childList:!0,subtree:!0,characterData:!0})},500);return()=>{window.removeEventListener("markdown-content-loaded",t),clearTimeout(a),clearTimeout(n),l.disconnect()}},[r]),(0,l.useEffect)(()=>{var e;let t=()=>{var e;let t=e=>{let r=[];return e.forEach(e=>{r.push(e.id),e.children&&r.push(...t(e.children))}),r},r=t(i).map(e=>({id:e,el:document.getElementById(e)})).filter(e=>e.el),a=null==(e=document.querySelector(".markdown-content"))?void 0:e.closest(".overflow-auto"),l=a?a.scrollTop:window.scrollY,n="";for(let e=r.length-1;e>=0;e--){let{id:t,el:s}=r[e];if(s){let e=s.getBoundingClientRect(),r=null==a?void 0:a.getBoundingClientRect();if((r?e.top-r.top+l:e.top+window.scrollY)<=l+100){n=t;break}}}n&&n!==s&&c(n)},r=null==(e=document.querySelector(".markdown-content"))?void 0:e.closest(".overflow-auto"),a=()=>t();return r&&r.addEventListener("scroll",a),window.addEventListener("scroll",a),t(),()=>{r&&r.removeEventListener("scroll",a),window.removeEventListener("scroll",a)}},[i,s]);let p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.children&&e.children.length>0,l=m.has(e.id),i=s===e.id;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[r&&(0,a.jsx)("button",{onClick:t=>{var r;return r=e.id,void(t.preventDefault(),t.stopPropagation(),h(e=>{let t=new Set(e);return t.has(r)?t.delete(r):t.add(r),t}))},className:"p-0.5 hover:bg-accent/50 rounded mr-1",children:l?(0,a.jsx)(o.A,{className:"h-3 w-3"}):(0,a.jsx)(n.A,{className:"h-3 w-3"})}),(0,a.jsx)("button",{onClick:t=>((e,t)=>{e.preventDefault(),e.stopPropagation(),console.log("TableOfContents: Clicking on heading with id:",t),c(t);let r=document.querySelectorAll('[id*="heading"]');console.log("TableOfContents: All heading elements found:",r.length),r.forEach(e=>console.log("  - ID:",e.id,"Text:",e.textContent));let a=document.getElementById(t);if(console.log("TableOfContents: Looking for element with id:",t),console.log("TableOfContents: Found element:",a),!a){document.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(e=>{e.id===t&&console.log("TableOfContents: Found heading via query selector:",e)}),console.log("TableOfContents: Element not found for id:",t);return}console.log("TableOfContents: Scrolling to element");try{a.scrollIntoView({behavior:"smooth",block:"start"}),console.log("TableOfContents: Used scrollIntoView")}catch(e){console.error("TableOfContents: Error with scrollIntoView:",e);try{let e=a.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:e-100,behavior:"smooth"}),console.log("TableOfContents: Used window.scrollTo")}catch(e){console.error("TableOfContents: Error with window.scrollTo:",e)}}})(t,e.id),className:u("flex-1 text-left text-sm py-1 px-2 rounded-md transition-colors",0===t?"font-medium":"",1===t?"text-muted-foreground":"",t>=2?"text-muted-foreground":"",i?"bg-accent text-accent-foreground font-medium":"hover:bg-accent/50",r||0!==t?"":"ml-5",!r&&t>0?"ml-5":""),style:{paddingLeft:"".concat(12*t+8,"px")},children:e.title})]}),r&&!l&&(0,a.jsx)("div",{children:e.children.map(e=>p(e,t+1))})]},e.id)};return 0===i.length?(0,a.jsx)("div",{className:"h-full p-3",children:(0,a.jsxs)("div",{className:"h-full flex flex-col bg-muted rounded-lg",children:[e&&(0,a.jsx)("div",{className:"px-6 pt-6 pb-4",children:(0,a.jsx)("h3",{className:"text-xs text-primary/40 font-semibold",children:t})}),(0,a.jsx)("div",{className:"flex-1 px-4 py-2 text-sm text-muted-foreground",children:"No headings found"})]})}):(0,a.jsx)("div",{className:"h-full p-3",children:(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[e&&(0,a.jsx)("div",{className:"px-6 pt-6 pb-4 flex-shrink-0",children:(0,a.jsx)("h3",{className:"text-xs text-primary/40 font-semibold",children:t})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-2",children:(0,a.jsx)("nav",{className:"space-y-1",children:i.map(e=>p(e))})})]})})}var ei=r(9427),ed=r(7494),eu=r(5379);function em(){let{theme:e,setTheme:t}=(0,eu.D)();return(0,a.jsxs)(b,{variant:"ghost",size:"icon",onClick:()=>t("light"===e?"dark":"light"),className:"h-8 w-8",children:[(0,a.jsx)(ei.A,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(ed.A,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}var eh=r(9540),ep=r(3),ef=r(5483),ex=r(5229);let eg=ef.bL;ef.l9,ef.bm;let eb=ef.ZL,ev=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(ef.hJ,{className:u("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...l,ref:t})});ev.displayName=ef.hJ.displayName;let ej=(0,x.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ew=l.forwardRef((e,t)=>{let{side:r="right",className:l,children:s,...n}=e;return(0,a.jsxs)(eb,{children:[(0,a.jsx)(ev,{}),(0,a.jsxs)(ef.UC,{ref:t,className:u(ej({side:r}),l),...n,children:[s,(0,a.jsxs)(ef.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(ex.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ew.displayName=ef.UC.displayName;let eN=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",t),...r})};eN.displayName="SheetHeader";let ey=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(ef.hE,{ref:t,className:u("text-lg font-semibold text-foreground",r),...l})});function ek(e){var t;let{initialFile:r,serverDocument:n}=e,c=(0,s.useRouter)(),i=(0,s.usePathname)(),[d,u]=(0,l.useState)(r||null),[m,h]=(0,l.useState)(!1),[p,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{r?u(r):"/"===i&&k.workspace.enabled&&k.workspace.initialFile&&u(k.workspace.initialFile)},[r,i]);let x=e=>{if(!e)return;u(e);let t=e.replace("documents/","").replace(".md","").toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\/]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");i!=="/doc/".concat(t)&&c.push("/doc/".concat(t))};return(0,a.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:"h-16 bg-background flex items-center justify-between px-4 md:px-8 pt-8 pb-4",children:[(0,a.jsx)("span",{className:"font-semibold text-lg",children:k.siteName}),(0,a.jsx)(em,{})]}),(0,a.jsx)("div",{className:"md:hidden border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"flex items-center h-12 px-2",children:[(0,a.jsx)(b,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>h(!0),children:(0,a.jsx)(eh.A,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"flex-1 flex items-center px-2 text-sm text-muted-foreground overflow-hidden",children:(0,a.jsx)("span",{className:"truncate",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Documents"}),(0,a.jsx)(o.A,{className:"h-3 w-3 inline mx-1"}),(0,a.jsx)("span",{className:"text-foreground",children:null==(t=d.split("/").pop())?void 0:t.replace(".md","")})]}):"Select a document"})}),(0,a.jsx)(b,{variant:"ghost",size:"icon",className:"h-9 w-9 lg:hidden",onClick:()=>f(!0),children:(0,a.jsx)(ep.A,{className:"h-5 w-5"})})]})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsxs)("div",{className:"h-full flex max-w-8xl mx-auto",children:[(0,a.jsx)("aside",{className:"hidden md:block w-64 border-r border-border border-dashed overflow-y-auto flex-shrink-0",children:(0,a.jsx)(_,{showTitle:!0,title:"All Pages",onFileSelect:x,selectedFile:d})}),(0,a.jsx)("main",{className:"flex-1 bg-background overflow-y-auto",children:(0,a.jsx)(eo,{selectedFile:d,onFileSelect:x,serverDocument:n})}),(0,a.jsx)("aside",{className:"hidden lg:block w-64 overflow-y-auto flex-shrink-0",children:(0,a.jsx)(ec,{showTitle:!0,title:"On This Page"})})]})}),(0,a.jsx)(eg,{open:m,onOpenChange:h,children:(0,a.jsxs)(ew,{side:"left",className:"w-80 p-0 flex flex-col h-full",children:[(0,a.jsx)(eN,{className:"px-6 py-4 border-b",children:(0,a.jsx)(ey,{children:"All Pages"})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full overflow-y-auto",children:(0,a.jsx)(_,{showTitle:!1,onFileSelect:e=>{x(e),h(!1)},selectedFile:d})})})]})}),(0,a.jsx)(eg,{open:p,onOpenChange:f,children:(0,a.jsxs)(ew,{side:"right",className:"w-80 p-0 flex flex-col h-full",children:[(0,a.jsx)(eN,{className:"px-6 py-4 border-b",children:(0,a.jsx)(ey,{children:"On This Page"})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full overflow-y-auto",children:(0,a.jsx)(ec,{showTitle:!1})})})]})})]})}ey.displayName=ef.hE.displayName,l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(ef.VY,{ref:t,className:u("text-sm text-muted-foreground",r),...l})}).displayName=ef.VY.displayName}}]);